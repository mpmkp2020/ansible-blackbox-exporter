---
sudo: required
language: python
cache: pip
services:
  - docker
jobs:
  include:
    - stage: Build and test wheel
      os: linux
      arch: arm64-graviton2
      dist: focal
      virt: vm
      group: edge
      env:
        - ANSIBLE=2.5
        - ANSIBLE=2.6
        - ANSIBLE=2.7
matrix:
  fast_finish: true
install:
  - pip install tox-travis git-semver
script:
  - tox
deploy:
  provider: script
  skip_cleanup: true
  script:
    - git --version
    - .travis/releaser.sh
  on:
    branch: master
branches:
  only:
    - master
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
